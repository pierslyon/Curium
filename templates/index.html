<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Curium Office Status</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    :root { --bg:#0f1115; --card:#171b22; --muted:#a7b0be; --accent:#93c600; }
    *{box-sizing:border-box} body{margin:0;background:var(--bg);color:#e9eef7;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif}
    header{display:grid;grid-template-columns:1fr auto 1fr;align-items:center;gap:12px;padding:14px 18px;background:#0b0e13;border-bottom:1px solid #1e2431}
    .h-left{justify-self:start;font-size:22px;color:var(--accent)}
    .h-title{justify-self:center;font-size:24px;font-weight:700;letter-spacing:.4px}
    .h-right{justify-self:end}
    .wx{width:28px;height:28px;vertical-align:middle;fill:#dce6f8}

    main{max-width:1100px;margin:0 auto;padding:18px;display:grid;gap:16px}
    .row{display:grid;grid-template-columns:1.3fr 1fr;gap:16px}
    .card{background:var(--card);border:1px solid #242c3a;border-radius:14px;padding:16px}

    .nownext h2{margin:0 0 8px;font-size:18px;color:#cfd6e2}
    .blk{display:grid;grid-template-columns:auto 1fr;gap:10px;align-items:center;margin-bottom:12px}
    .badge{background:#1f2635;border:1px solid #2b3550;color:#cfe1ff;padding:6px 10px;border-radius:10px;font-weight:700}
    .when{color:var(--accent);font-weight:800}
    .subj{font-size:20px;font-weight:700;margin-top:4px}

    .strip{display:grid;grid-template-columns:repeat(7,1fr);gap:10px}
    .d{background:#161b23;border:1px solid #262f40;border-radius:10px;padding:10px;text-align:center}
    .d .lbl{color:#cfd6e2;font-size:14px;margin-bottom:6px}
    .d svg{width:26px;height:26px;fill:#e1e8f7;margin:4px 0}
    .d .t{font-size:13px}
    .d .hi{color:var(--accent);font-weight:700}
    .d .lo{color:#94a3b8}

    .footer{color:var(--muted);text-align:center;font-size:12px;margin-top:4px}
  </style>
</head>
<body>
  <!-- SVG sprite (icons) -->
  <svg width="0" height="0" style="position:absolute;visibility:hidden" aria-hidden="true">
    <symbol id="wx-sun" viewBox="0 0 24 24"><circle cx="12" cy="12" r="5"/><path d="M12 1v3M12 20v3M4.2 4.2l2.2 2.2M17.6 17.6l2.2 2.2M1 12h3M20 12h3M4.2 19.8l2.2-2.2M17.6 6.4l2.2-2.2"/></symbol>
    <symbol id="wx-few" viewBox="0 0 24 24"><circle cx="7" cy="7" r="3"/><path d="M6 14h10a3 3 0 0 0 0-6 4 4 0 0 0-7-1 3 3 0 0 0-3 7z"/></symbol>
    <symbol id="wx-partly" viewBox="0 0 24 24"><circle cx="6" cy="6" r="3"/><path d="M6 16h11a3 3 0 0 0 0-6 5 5 0 0 0-9-1 3 3 0 0 0-2 7z"/></symbol>
    <symbol id="wx-cloud" viewBox="0 0 24 24"><path d="M6 17h11a4 4 0 0 0 0-8 6 6 0 0 0-11-2A4 4 0 0 0 6 17z"/></symbol>
    <symbol id="wx-fog" viewBox="0 0 24 24"><path d="M3 9h18M3 13h18M3 17h18"/></symbol>
    <symbol id="wx-drizzle" viewBox="0 0 24 24"><path d="M6 16h11a3 3 0 0 0 0-6 5 5 0 0 0-9-1 3 3 0 0 0-2 7z"/><path d="M8 20l1 2M12 20l1 2M16 20l1 2"/></symbol>
    <symbol id="wx-rain" viewBox="0 0 24 24"><path d="M6 15h11a4 4 0 0 0 0-8 6 6 0 0 0-11-2A4 4 0 0 0 6 15z"/><path d="M8 18l1 3M12 18l1 3M16 18l1 3"/></symbol>
    <symbol id="wx-sleet" viewBox="0 0 24 24"><path d="M6 15h11a4 4 0 0 0 0-8 6 6 0 0 0-11-2A4 4 0 0 0 6 15z"/><path d="M8 18l1 3M12 18l1 3M16 18l1 3M10 18h4"/></symbol>
    <symbol id="wx-snow" viewBox="0 0 24 24"><path d="M6 15h11a4 4 0 0 0 0-8 6 6 0 0 0-11-2A4 4 0 0 0 6 15z"/><path d="M10 18l2 2M12 16v6M14 18l-2 2"/></symbol>
    <symbol id="wx-storm" viewBox="0 0 24 24"><path d="M6 14h11a3 3 0 0 0 0-6 5 5 0 0 0-9-1 3 3 0 0 0-2 7z"/><path d="M11 16l-2 5 5-4-2 5"/></symbol>
    <symbol id="wx-unknown" viewBox="0 0 24 24"><circle cx="12" cy="7" r="3"/><path d="M12 10v3"/><circle cx="12" cy="18" r="1"/></symbol>
  </svg>

  <header>
    <!-- Temperature top-left -->
    <div class="h-left">
      {% if weather.temp_c is not none %}{{ weather.temp_c }}°C{% else %}—°C{% endif %}
    </div>
    <div class="h-title">Curium Office Status</div>
    <!-- Weather icon top-right -->
    <div class="h-right">
      <svg class="wx"><use href="#wx-{{ weather.icon or 'unknown' }}"></use></svg>
    </div>
  </header>

  <main>
    <div class="row">
      <!-- Now / Next card -->
      <section class="card nownext">
        <h2>Now / Next</h2>

        <div class="blk">
          <div class="badge">Now</div>
          {% if current %}
            {% set s = current.start.dateTime | to_local %}
            {% set t = current.end.dateTime   | to_local %}
            <div>
              <div class="when">{{ s|fmt_time }} – {{ t|fmt_time }} · {{ s|fmt_date }}</div>
              <div class="subj">{{ current.subject or "Busy" }}</div>
            </div>
          {% else %}
            <div><div class="when">Available</div><div class="subj">No meeting right now</div></div>
          {% endif %}
        </div>

        <div class="blk">
          <div class="badge">Next</div>
          {% if nxt %}
            {% set s2 = nxt.start.dateTime | to_local %}
            {% set t2 = nxt.end.dateTime   | to_local %}
            <div>
              <div class="when">{{ s2|fmt_time }} – {{ t2|fmt_time }} · {{ s2|fmt_date }}</div>
              <div class="subj">{{ nxt.subject or "Meeting" }}</div>
            </div>
          {% else %}
            <div><div class="when">None</div><div class="subj">No upcoming meeting</div></div>
          {% endif %}
        </div>

        <div class="footer">Last updated {{ now|fmt_time }} · {{ now|fmt_date }}</div>
      </section>

      <!-- 7-day mini weather strip -->
      <section class="card">
        <h2 style="margin:0 0 10px;color:#cfd6e2;font-size:18px;">7-Day Forecast</h2>
        <div class="strip">
          {% for d in weather.daily %}
            <div class="d">
              <div class="lbl">{{ d.label }}</div>
              <svg><use href="#wx-{{ d.icon | default('unknown') }}"></use></svg>
              <div class="t"><span class="hi">{{ d.tmax }}°</span> / <span class="lo">{{ d.tmin }}°</span></div>
            </div>
          {% endfor %}
          {% if not weather.daily or weather.daily|length == 0 %}
            <div class="d" style="grid-column:1/-1;color:#aab;">Weather unavailable</div>
          {% endif %}
        </div>
      </section>
    </div>
  </main>
</body>
</html>


